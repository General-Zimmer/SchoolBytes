@model List<Course>
@{
    var selectedCourseId = ViewBag.SelectedCourseId as int?;
}

<link rel="stylesheet" href="/Content/CourseOverviewStyles.css" />

<h1>Hold oversigt</h1>

<!-- Get all courses -->
<ul id="courseList">
    @foreach (var course in Model)
    {
        <li>
            <div>
                <form id="detail-form" asp-action="CourseOverview" method="get">
                    <input type="hidden" name="selectedCourseId" value="@course.Id"/>
                    @course.Name 
                    <button type="submit" class="detail-button">&#9660;</button> <!-- down arrow -->
                </form>
            </div>

            @if (selectedCourseId == course.Id)
            {
                <div class="course-details">
                    <h4>@course.Name</h4>

                    <!-- <p><b>Underviser:</b> @course.Teacher.Name</p>  fix this -->

                    <p>
                        <b>Start:</b> @course.StartDate.ToString("dd-MM-yyyy")
                    </p>
                    <p>
                        <b>Slut:</b> @course.EndDate.ToString("dd-MM-yyyy")
                    </p>
                    <p>
                        <b>Beskrivelse:</b> @course.Description
                    </p>
                    <p>
                        <b>Maksimum antal deltagere:</b> @course.MaxCapacity
                    </p>

                    <!-- Update -->
                    @using (Html.BeginForm("UpdateCourse", "Course", FormMethod.Post))
                    {
                        <input type="hidden" name="Id" value="@course.Id"/>
                        <button type="submit" class="toggle-button">Rediger hold</button>
                    }
                    <!-- måske dette kunne være en idé?? -->

                    <!-- Delete -->
                    @using (Html.BeginForm("DeleteCourse", "Course", FormMethod.Post))
                    {
                    <input type="hidden" name="Id" value="@course.Id"/>
                    <button type="submit" class="toggle-button">Slet hold</button>
                    }
                </div>
            }
        </li>
    }
</ul>


<h1>Opret hold</h1>
<!-- Create -->
@using (Html.BeginForm("CreateCourse", "Course", FormMethod.Post, new { @class = "create-form" }))
{
    <div class="create-group">
        <label class="create-label" for="Name">Kursusnavn:</label>
        <input class="create-input" type="text" id="Name" name="Name" required/>
    </div>

    <div class="create-group">
        <label class="create-label" for="Description">Beskrivelse:</label>
        <textarea class="create-input" id="Description" name="Description" required></textarea>
    </div>

    <div class="create-group">
        <label class="create-label" for="Teacher">Lærer:</label>
        <input class="create-input" type="text" id="Teacher" name="Teacher.Name" required/>
    </div>

    <div class="create-group">
        <label class="create-label" for="StartDate">Startdato:</label>
        <input class="create-input" type="date" id="StartDate" name="StartDate" required/>
    </div>

    <div class="create-group">
        <label class="create-label" for="EndDate">Slutdato:</label>
        <input class="create-input" type="date" id="EndDate" name="EndDate" required/>
    </div>

    <div class="create-group">
        <label class="create-label" for="MaxCapacity">Maksimal kapacitet:</label>
        <input class="create-input" type="number" id="MaxCapacity" name="MaxCapacity" min="1" required/>
    </div>

    <div class="create-group">
        <button class="create-button" type="submit">Opret nyt hold</button>
    </div>
}